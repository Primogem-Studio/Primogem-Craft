{
  "_fv": 79,
  "_type": "procedure",
  "definition": {
    "procedurexml": "<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable type=\"Number\" id=\"ie\">ie</variable><variable type=\"Entity\" id=\"en\">en</variable></variables><block type=\"event_trigger\" deletable=\"false\" x=\"40\" y=\"40\"><field name=\"trigger\">no_ext_trigger</field><next><block type=\"java_code\"><field name=\"CODE\">ItemStack yzsp = new ItemStack(PrimogemcraftModItems.YUZHOUSUIPIAN.get());</field><next><block type=\"variables_set_entity\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" is_player_var=\"false\" has_entity=\"false\"></mutation><field name=\"VAR\">local:en</field><value name=\"VAL\"><block type=\"entity_from_deps\"></block></value><next><block type=\"variables_set_number\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" is_player_var=\"false\" has_entity=\"false\"></mutation><field name=\"VAR\">local:ie</field><value name=\"VAL\"><block type=\"item_nbt_num_get\"><value name=\"item\"><block type=\"itemstack_to_mcitem\"></block></value><value name=\"tagName\"><block type=\"text\"><field name=\"TEXT\">event_</field></block></value></block></value><next><block type=\"java_code\"><field name=\"CODE\">boolean o1 = switch ((int) ie) {</field><next><block type=\"java_code\"><field name=\"CODE\"> case 1 -&gt; shijian_123(entity, x, y, z, 1, yzsp, 10);</field><next><block type=\"java_code\"><field name=\"CODE\">case 2 -&gt; shijian_123(entity, x, y, z, suijiint(world,1,3), yzsp, 20);</field><next><block type=\"java_code\"><field name=\"CODE\">case 3 -&gt; shijian_123(entity, x, y, z, suijiint(world,2,4), yzsp, 40);</field><next><block type=\"java_code\"><field name=\"CODE\"> default -&gt; false;};</field><next><block type=\"java_code\"><field name=\"CODE\">if (o1) itemstack.shrink(1);</field><next><block type=\"java_code\"><field name=\"CODE\"> }&amp;#10;&amp;#10;    public static void fumo(Entity entity ,double x,double y,double z,int zhi) {&amp;#10;// 接收对应等级附魔并为实体打开附魔GUI，最大4</field><next><block type=\"entity_nbt_num_set\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"tagName\"><block type=\"text\"><field name=\"TEXT\">pgc_shijian_fumo_pinzhi</field></block></value><value name=\"tagValue\"><block type=\"java_code_get\"><field name=\"CODE\">zhi</field></block></value><next><block type=\"wait\"><value name=\"ticks\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><statement name=\"do\"><block type=\"entity_open_gui\"><field name=\"guiname\">GUISJfumo</field><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"x\"><block type=\"coord_x\"></block></value><value name=\"y\"><block type=\"coord_y\"></block></value><value name=\"z\"><block type=\"coord_z\"></block></value></block></statement><next><block type=\"java_code\" collapsed=\"true\"><field name=\"CODE\">}&amp;#10;&amp;#10;    public static boolean item_zhi_1_1(ItemStack item, int zhi, Entity entity) {&amp;#10;//移除特定数量的item&amp;#10;        ItemStack i = item;&amp;#10;        int z = 0;&amp;#10;        if (entity.getCapability(Capabilities.ItemHandler.ENTITY, null) instanceof IItemHandlerModifiable _modHandlerIter) {&amp;#10;            for (int _idx = 0; _idx &lt; _modHandlerIter.getSlots(); _idx++) {&amp;#10;                ItemStack itemstackiterator = _modHandlerIter.getStackInSlot(_idx).copy();&amp;#10;                if (itemstackiterator.getItem() == i.getItem())z = z+itemstackiterator.getCount();}&amp;#10;        }&amp;#10;        if (z &gt;= zhi) {&amp;#10;            if (entity instanceof Player _player) {&amp;#10;                ItemStack _stktoremove = new ItemStack(i.getItem());&amp;#10;                _player.getInventory().clearOrCountMatchingItems(p -&gt; _stktoremove.getItem() == p.getItem(), (int) zhi, _player.inventoryMenu.getCraftSlots());&amp;#10;            }&amp;#10;            return true;&amp;#10;        }&amp;#10;        return false;</field><next><block type=\"java_code\" collapsed=\"true\"><field name=\"CODE\">}&amp;#10;&amp;#10;        public static boolean shijian_123 (Entity entity,double x, double y, double z, int zhi, ItemStack item,int itzhi)&amp;#10;        {&amp;#10;            //移除 entity 的 itzhi个 item 后打开 zhi 级别的附魔界面&amp;#10;            if (item_zhi_1_1(item, itzhi, entity)) {&amp;#10;                fumo(entity, x, y, z, zhi);&amp;#10;                return true;&amp;#10;            }&amp;#10;            if (entity instanceof Player _player &amp;&amp; !_player.level().isClientSide())&amp;#10;                _player.displayClientMessage(Component.literal(\"\\u00A7c\\u6761\\u4EF6\\u4E0D\\u8DB3\\uFF01\"), false);&amp;#10;            return false;</field><next><block type=\"java_code\" collapsed=\"true\"><field name=\"CODE\">    }&amp;#10;&amp;#10;    public static int suijiint(LevelAccessor world,int zhi,int zhi0) {&amp;#10;        int a = 0;&amp;#10;        if (!world.isClientSide())&amp;#10;            a = Mth.nextInt(RandomSource.create(),zhi,zhi0);&amp;#10;        return a;</field></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></xml>",
    "skipDependencyNullCheck": false
  }
}